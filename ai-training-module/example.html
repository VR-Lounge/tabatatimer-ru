<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ AI-—Ç—Ä–µ–Ω–∏–Ω–≥–∞</title>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CSS –º–æ–¥—É–ª—è AI-—Ç—Ä–µ–Ω–∏–Ω–≥–∞ -->
    <link rel="stylesheet" href="css/mediapipe-pose.css">
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ TensorFlow.js –∏ pose-detection (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core@4.11.0/dist/tf-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter@4.11.0/dist/tf-converter.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl@4.11.0/dist/tf-backend-webgl.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection@2.1.0/dist/pose-detection.min.js"></script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ AI-—Ç—Ä–µ–Ω–∏–Ω–≥–∞</h1>
        
        <!-- HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è AI-—Ç—Ä–µ–Ω–∏–Ω–≥–∞ -->
        <div class="mediapipe-ui-card">
            <div class="mediapipe-ui-meta">
                <div class="mediapipe-ui-title">–í–∫–ª—é—á–∏ AI-—Ç—Ä–µ–Ω–∏–Ω–≥</div>
                <div class="mediapipe-ui-tags">
                    <span class="mediapipe-chip" data-exercise="squat" style="cursor: pointer;">–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è</span>
                    <span class="mediapipe-chip" data-exercise="pushup" style="cursor: pointer;">–û—Ç–∂–∏–º–∞–Ω–∏—è</span>
                    <span class="mediapipe-chip" data-exercise="plank" style="cursor: pointer;">–ü–ª–∞–Ω–∫–∞</span>
                    <span class="mediapipe-chip" data-exercise="wallsit" style="cursor: pointer;">–°—Ç—É–ª—å—á–∏–∫</span>
                </div>
            </div>
            <p class="mediapipe-ui-description">AI-—Ç—Ä–µ–Ω–µ—Ä –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–≤–æ—é —Ç–µ—Ö–Ω–∏–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å—á–∏—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è. –í—ã–±–µ—Ä–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∏ –Ω–∞—á–Ω–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É!</p>
            
            <div class="mediapipe-ui-actions">
                <button id="mediapipe-toggle-btn" class="mediapipe-toggle-btn">–í–∫–ª—é—á–∏ AI-—Ç—Ä–µ–Ω–∏–Ω–≥</button>
                
                <div class="select-wrapper">
                    <select name="mediapipe-exercise" id="mediapipe-exercise-select">
                        <option value="squat" selected>–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è</option>
                        <option value="pushup">–û—Ç–∂–∏–º–∞–Ω–∏—è</option>
                        <option value="plank">–ü–ª–∞–Ω–∫–∞</option>
                        <option value="wallsit">–°—Ç—É–ª—å—á–∏–∫</option>
                    </select>
                </div>
            </div>
            
            <!-- –ü–ê–ù–ï–õ–¨ –ö–ê–õ–ò–ë–†–û–í–ö–ò (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤) -->
            <div id="calibration-panel" class="calibration-panel" style="display: none;">
                <div class="calibration-header">
                    <h3>üîß –ü–∞–Ω–µ–ª—å –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</h3>
                    <button id="calibration-toggle-btn" class="calibration-toggle-btn">–°–∫—Ä—ã—Ç—å</button>
                </div>
                <div class="calibration-body">
                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–Ω–µ–ª–∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ (—Å–º. index.php –¥–ª—è –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã) -->
                </div>
            </div>
            
            <div id="mediapipe-container" class="mediapipe-container">
                <video id="mediapipe-video" class="mediapipe-video" autoplay playsinline></video>
                <canvas id="mediapipe-canvas" class="mediapipe-canvas"></canvas>
                
                <div class="mediapipe-stats">
                    <div class="mediapipe-current-score" id="mediapipe-current-score">0</div>
                    <div class="mediapipe-score-label" id="mediapipe-score-label">–ü—Ä–∏—Å–µ–¥–∞–Ω–∏–µ</div>
                    
                    <div class="mediapipe-reps">
                        <span class="mediapipe-reps-label">–ü–æ–≤—Ç–æ—Ä–æ–≤:</span>
                        <span class="mediapipe-reps-value" id="mediapipe-reps-value">0</span>
                    </div>
                    
                    <div class="mediapipe-average">
                        <span class="mediapipe-average-label">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª:</span>
                        <span class="mediapipe-average-value" id="mediapipe-average-value">0</span>
                    </div>
                </div>
                
                <div id="mediapipe-rep-notification" class="mediapipe-rep-notification"></div>
                
                <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π -->
                <div id="mediapipe-position-hint" class="mediapipe-position-hint">
                    <div class="position-hint-icon"></div>
                    <div class="position-hint-message"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ sounds (–¥–ª—è –∑–≤—É–∫–∞ pay.mp3) -->
    <script>
        window.sounds = {
            pay: "audio/pay.mp3"
        };
    </script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript –º–æ–¥—É–ª–µ–π AI-—Ç—Ä–µ–Ω–∏–Ω–≥–∞ -->
    <!-- –í–ê–ñ–ù–û: –ü–æ—Ä—è–¥–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ! -->
    <script src="js/movenet-pose.js"></script>
    <script src="js/mediapipe-pose.js"></script>
    <script src="js/calibration-panel.js"></script>
    <script src="js/mediapipe-integration.js"></script>
    
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ TensorFlow.js –∏ pose-detection
        (function() {
            function checkTensorFlow() {
                if (window.tf && window.poseDetection) {
                    console.log('‚úì TensorFlow.js –∏ pose-detection –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                    return true;
                }
                return false;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ä–∞–∑—É
            if (!checkTensorFlow()) {
                // –ï—Å–ª–∏ –Ω–µ –≥–æ—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏
                let attempts = 0;
                const maxAttempts = 200; // 20 —Å–µ–∫—É–Ω–¥
                const checkInterval = setInterval(function() {
                    attempts++;
                    if (checkTensorFlow() || attempts >= maxAttempts) {
                        clearInterval(checkInterval);
                    }
                }, 100);
            }
        })();
    </script>
</body>
</html>

